2025-12-07 00:02:45.193 +03:00 [INF] HTTP GET /api/Cart responded 200 in 31.4222 ms
2025-12-07 00:04:44.039 +03:00 [INF] HTTP GET /api/Cart responded 200 in 14.0173 ms
2025-12-07 01:37:33.996 +03:00 [INF] HTTP GET /api/Cart responded 200 in 9.8986 ms
2025-12-07 12:32:01.739 +03:00 [INF] HTTP GET /api/Cart responded 200 in 32.2554 ms
2025-12-07 12:32:05.500 +03:00 [INF] HTTP GET /api/Cart responded 200 in 75.3792 ms
2025-12-07 14:26:34.465 +03:00 [INF] HTTP GET /api/Cart responded 200 in 40.3541 ms
2025-12-07 14:26:35.676 +03:00 [INF] HTTP GET /api/Cart responded 200 in 22.3219 ms
2025-12-07 14:26:35.695 +03:00 [INF] HTTP GET /api/Product responded 200 in 39.8491 ms
2025-12-07 14:26:35.719 +03:00 [INF] HTTP GET /api/Product responded 200 in 20.5533 ms
2025-12-07 14:26:38.253 +03:00 [INF] HTTP GET /api/Cart responded 200 in 11.5523 ms
2025-12-07 14:26:40.365 +03:00 [INF] HTTP GET /api/Cart responded 200 in 6.8307 ms
2025-12-07 14:26:50.135 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 14:26:50.174 +03:00 [INF] HTTP GET /api/Product/0bb82c84-2565-4bb3-826d-78484791a741 responded 200 in 86.0547 ms
2025-12-07 14:27:42.383 +03:00 [INF] HTTP GET /api/Product/8b14d726-bc5e-4d14-9d9d-18843d3e337a responded 200 in 16.1872 ms
2025-12-07 14:27:51.540 +03:00 [INF] HTTP GET /api/Product/8b14d726-bc5e-4d14-9d9d-18843d3e337a responded 200 in 15.8127 ms
2025-12-07 14:28:01.915 +03:00 [INF] HTTP POST /api/Cart/items responded 200 in 347.4494 ms
2025-12-07 14:28:16.519 +03:00 [INF] HTTP GET /api/Cart responded 200 in 11.8054 ms
2025-12-07 14:28:20.321 +03:00 [INF] HTTP GET /api/Cart responded 200 in 8.4756 ms
2025-12-07 14:28:20.332 +03:00 [INF] HTTP GET /api/Cart responded 200 in 8.2271 ms
2025-12-07 14:28:22.393 +03:00 [INF] HTTP PUT /api/Cart/items/2fb18a55-885d-449b-9aee-060034c43f8c responded 200 in 102.4419 ms
2025-12-07 14:28:24.669 +03:00 [INF] HTTP PUT /api/Cart/items/2fb18a55-885d-449b-9aee-060034c43f8c responded 200 in 31.8505 ms
2025-12-07 14:28:25.120 +03:00 [INF] HTTP PUT /api/Cart/items/f07b3989-5464-4fd3-b3c8-dc586eb21183 responded 200 in 30.5779 ms
2025-12-07 14:28:25.931 +03:00 [ERR] HTTP PUT /api/Cart/items/fc5520f8-41b5-4597-a601-733c0765e2c1 responded 500 in 361.5756 ms
ECommerceAPI.Application.Exceptions.StockException: Stok Yeterli Değil
   at ECommerceAPI.Application.Features.Commands.Carts.UpdateCart.UpdateCartItemsCommandHandler.Handle(UpdateCartItemsCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Carts\UpdateCartItem\UpdateCartItemsCommandHandler.cs:line 58
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CartController.UpdateItem(Guid itemId, UpdateCartItemsCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CartController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 14:30:54.576 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 31
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-07 14:30:54.683 +03:00 [INF] HTTP GET /api/Cart responded 200 in 15.8838 ms
2025-12-07 14:30:54.702 +03:00 [INF] HTTP GET /api/Cart responded 200 in 13.2785 ms
2025-12-07 14:30:54.718 +03:00 [INF] HTTP GET /api/Cart responded 200 in 13.9299 ms
2025-12-07 14:30:54.723 +03:00 [INF] HTTP GET /api/Product responded 200 in 56.0076 ms
2025-12-07 14:30:54.742 +03:00 [INF] HTTP GET /api/Cart responded 200 in 20.0194 ms
2025-12-07 14:30:54.745 +03:00 [INF] HTTP GET /api/Product responded 200 in 21.4795 ms
2025-12-07 14:30:57.900 +03:00 [INF] HTTP GET /api/Cart responded 200 in 10.9430 ms
2025-12-07 14:31:03.615 +03:00 [INF] HTTP GET /api/Cart responded 200 in 8.0599 ms
2025-12-07 14:32:08.954 +03:00 [INF] HTTP GET /api/Cart responded 200 in 7.6924 ms
2025-12-07 14:32:10.881 +03:00 [INF] HTTP GET /api/Cart responded 200 in 9.5401 ms
2025-12-07 14:32:17.474 +03:00 [INF] HTTP GET /api/Cart responded 200 in 7.6541 ms
2025-12-07 14:32:38.002 +03:00 [INF] HTTP GET /api/Cart responded 200 in 7.9848 ms
2025-12-07 14:32:52.821 +03:00 [INF] HTTP GET /api/Cart responded 200 in 8.7728 ms
2025-12-07 14:32:54.732 +03:00 [INF] HTTP GET /api/Cart responded 200 in 13.9672 ms
2025-12-07 14:32:54.748 +03:00 [INF] HTTP GET /api/Product responded 200 in 23.3425 ms
2025-12-07 14:32:55.774 +03:00 [INF] HTTP GET /api/Cart responded 200 in 9.9029 ms
2025-12-07 14:33:42.414 +03:00 [INF] HTTP GET /api/Cart responded 200 in 9.6963 ms
2025-12-07 14:34:02.311 +03:00 [INF] HTTP GET /api/Cart responded 200 in 37.5542 ms
2025-12-07 14:34:28.497 +03:00 [INF] HTTP GET /api/Cart responded 200 in 7.3321 ms
2025-12-07 14:36:11.569 +03:00 [INF] HTTP GET /api/Cart responded 200 in 9.4248 ms
2025-12-07 14:38:46.311 +03:00 [INF] HTTP GET /api/Cart responded 200 in 26.6621 ms
2025-12-07 14:39:19.256 +03:00 [INF] HTTP GET /api/Cart responded 200 in 36.6790 ms
2025-12-07 14:40:00.756 +03:00 [INF] HTTP GET /api/Cart responded 200 in 9.4687 ms
2025-12-07 15:20:56.565 +03:00 [INF] HTTP GET /api/Cart responded 200 in 39.5776 ms
2025-12-07 15:20:57.783 +03:00 [INF] HTTP GET /api/Cart responded 200 in 8.0957 ms
2025-12-07 15:21:12.186 +03:00 [INF] HTTP GET /api/Cart responded 200 in 9.4966 ms
2025-12-07 15:27:07.297 +03:00 [INF] HTTP GET /api/Cart responded 200 in 47.3412 ms
2025-12-07 15:28:50.245 +03:00 [INF] HTTP GET /api/Cart responded 200 in 13.2915 ms
2025-12-07 15:29:03.249 +03:00 [INF] HTTP GET /api/Cart responded 200 in 14.5312 ms
2025-12-07 15:39:10.674 +03:00 [INF] HTTP GET /api/Cart responded 200 in 23.7106 ms
2025-12-07 15:39:14.455 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 129.4442 ms
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 15:39:25.442 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 31
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-07 15:39:25.580 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 94.9459 ms
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken)
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 15:39:27.812 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 31
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-07 15:42:47.202 +03:00 [INF] Uygulama başarıyla başladı!
2025-12-07 15:42:47.741 +03:00 [INF] Now listening on: https://localhost:7196
2025-12-07 15:42:47.746 +03:00 [INF] Now listening on: http://localhost:5067
2025-12-07 15:42:47.831 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-07 15:42:47.835 +03:00 [INF] Hosting environment: Development
2025-12-07 15:42:47.848 +03:00 [INF] Content root path: C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API
2025-12-07 15:42:58.743 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-07 15:43:01.527 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 15:43:02.092 +03:00 [INF] HTTP GET /api/Cart responded 200 in 3382.4758 ms
2025-12-07 15:43:04.830 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 188.2595 ms
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 15:43:04.978 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLHOG6RF7E:00000003
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:43:05.019 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:43:05.161 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 94.3468 ms
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 15:43:05.205 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLHOG6RF7E:00000005
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:43:05.216 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:43:36.437 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 9072.6186 ms
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 15:43:46.231 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLHOG6RF7E:00000007
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:43:47.414 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:44:17.026 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 28423.7281 ms
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 15:44:17.172 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLHOG6RF7E:00000009
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:44:17.206 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:44:17.213 +03:00 [INF] HTTP GET /api/Cart responded 200 in 162.9118 ms
2025-12-07 15:44:17.275 +03:00 [INF] HTTP GET /api/Cart responded 200 in 225.4691 ms
2025-12-07 15:44:17.698 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 627.4546 ms
2025-12-07 15:44:17.698 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 637.3529 ms
2025-12-07 15:44:17.899 +03:00 [INF] HTTP GET /api/Cart responded 200 in 55.4870 ms
2025-12-07 15:44:18.040 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 15:44:18.097 +03:00 [INF] HTTP GET /api/Product responded 200 in 252.0025 ms
2025-12-07 15:44:18.113 +03:00 [INF] HTTP GET /api/Product responded 200 in 21.3093 ms
2025-12-07 15:44:21.276 +03:00 [INF] HTTP GET /api/Cart responded 200 in 19.2845 ms
2025-12-07 15:44:32.568 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 5437.2740 ms
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 23
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 15:45:09.598 +03:00 [INF] Uygulama başarıyla başladı!
2025-12-07 15:45:10.253 +03:00 [INF] Now listening on: https://localhost:7196
2025-12-07 15:45:10.266 +03:00 [INF] Now listening on: http://localhost:5067
2025-12-07 15:45:10.385 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-07 15:45:10.419 +03:00 [INF] Hosting environment: Development
2025-12-07 15:45:10.427 +03:00 [INF] Content root path: C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API
2025-12-07 15:45:16.841 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-07 15:45:19.191 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 15:45:19.751 +03:00 [INF] HTTP GET /api/Cart responded 200 in 2948.7218 ms
2025-12-07 15:47:36.251 +03:00 [INF] Uygulama başarıyla başladı!
2025-12-07 15:47:36.739 +03:00 [INF] Now listening on: https://localhost:7196
2025-12-07 15:47:36.743 +03:00 [INF] Now listening on: http://localhost:5067
2025-12-07 15:47:36.822 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-07 15:47:36.825 +03:00 [INF] Hosting environment: Development
2025-12-07 15:47:36.830 +03:00 [INF] Content root path: C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API
2025-12-07 15:47:44.124 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-07 15:48:28.141 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 44047.4865 ms
2025-12-07 15:48:28.569 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 15:48:28.569 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 15:48:28.690 +03:00 [INF] HTTP GET /api/Product responded 200 in 379.2438 ms
2025-12-07 15:48:28.722 +03:00 [INF] HTTP GET /api/Product responded 200 in 33.8864 ms
2025-12-07 15:48:28.896 +03:00 [INF] HTTP GET /api/Cart responded 200 in 585.3587 ms
2025-12-07 15:55:22.741 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 137.9544 ms
2025-12-07 15:55:22.818 +03:00 [INF] HTTP GET /api/Cart responded 200 in 19.6106 ms
2025-12-07 15:55:36.545 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 143.1036 ms
2025-12-07 15:55:36.616 +03:00 [INF] HTTP GET /api/Cart responded 200 in 15.9468 ms
2025-12-07 15:57:16.636 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 58690.4689 ms
2025-12-07 15:57:16.792 +03:00 [INF] HTTP GET /api/Cart responded 200 in 14.4507 ms
2025-12-07 15:57:21.475 +03:00 [INF] HTTP GET /api/Cart responded 200 in 30.3821 ms
2025-12-07 15:57:55.630 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 25477.2233 ms
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 15:58:00.909 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLHR6BTDGE:00000017
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 15:58:00.954 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:00:43.002 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 162006.5144 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:00:43.094 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLHR6BTDGE:00000019
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:00:43.120 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:01:47.051 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 55832.6439 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:01:52.892 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLHR6BTDGE:0000001B
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:01:53.457 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId()
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:04:26.239 +03:00 [INF] Uygulama başarıyla başladı!
2025-12-07 16:04:26.683 +03:00 [INF] Now listening on: https://localhost:7196
2025-12-07 16:04:26.690 +03:00 [INF] Now listening on: http://localhost:5067
2025-12-07 16:04:26.779 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-07 16:04:26.784 +03:00 [INF] Hosting environment: Development
2025-12-07 16:04:26.786 +03:00 [INF] Content root path: C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API
2025-12-07 16:04:49.346 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-07 16:05:00.032 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 10739.3471 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:05:04.136 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLI4JD1EK6:00000001
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:05:04.182 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:07:22.968 +03:00 [INF] Uygulama başarıyla başladı!
2025-12-07 16:07:23.654 +03:00 [INF] Now listening on: https://localhost:7196
2025-12-07 16:07:23.661 +03:00 [INF] Now listening on: http://localhost:5067
2025-12-07 16:07:23.776 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-07 16:07:23.782 +03:00 [INF] Hosting environment: Development
2025-12-07 16:07:23.786 +03:00 [INF] Content root path: C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API
2025-12-07 16:07:27.285 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-07 16:07:39.233 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 11973.6552 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:07:48.023 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLI683K2UT:00000001
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:07:48.774 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:07:56.408 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 4451.1708 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:07:56.454 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLI683K2UT:00000003
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:07:56.472 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:13:09.597 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 118.9635 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:13:14.110 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLI683K2UT:00000005
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:13:14.166 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:13:14.981 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 68.9013 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:13:15.071 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLI683K2UT:00000007
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:13:15.093 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:14:40.598 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 24593.7300 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:14:41.744 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 1126.2224 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:14:41.802 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLI683K2UT:00000009
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:14:41.848 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLI683K2UT:0000000B
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:14:41.864 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:14:41.883 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:14:42.911 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 983.0569 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:14:43.009 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLI683K2UT:0000000F
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:14:43.034 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:14:45.550 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 16:14:46.069 +03:00 [INF] HTTP GET /api/Cart responded 200 in 5451.1132 ms
2025-12-07 16:16:14.117 +03:00 [INF] Uygulama başarıyla başladı!
2025-12-07 16:16:14.602 +03:00 [INF] Now listening on: https://localhost:7196
2025-12-07 16:16:14.608 +03:00 [INF] Now listening on: http://localhost:5067
2025-12-07 16:16:14.677 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-07 16:16:14.682 +03:00 [INF] Hosting environment: Development
2025-12-07 16:16:14.684 +03:00 [INF] Content root path: C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API
2025-12-07 16:16:19.994 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-07 16:16:27.265 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 7297.9954 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:16:29.793 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLIB6CP6OA:00000001
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:16:29.821 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:16:31.570 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 1686.3710 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:16:31.633 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLIB6CP6OA:00000003
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:16:31.650 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 133
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:17:12.698 +03:00 [INF] Uygulama başarıyla başladı!
2025-12-07 16:17:13.197 +03:00 [INF] Now listening on: https://localhost:7196
2025-12-07 16:17:13.202 +03:00 [INF] Now listening on: http://localhost:5067
2025-12-07 16:17:13.274 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-07 16:17:13.287 +03:00 [INF] Hosting environment: Development
2025-12-07 16:17:13.291 +03:00 [INF] Content root path: C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API
2025-12-07 16:17:15.946 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-07 16:17:18.364 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 16:17:18.928 +03:00 [INF] HTTP GET /api/Cart responded 200 in 3018.2067 ms
2025-12-07 16:17:24.528 +03:00 [INF] HTTP GET /api/Cart responded 200 in 121.9375 ms
2025-12-07 16:17:34.577 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 451.7467 ms
2025-12-07 16:17:34.681 +03:00 [INF] HTTP GET /api/Cart responded 200 in 21.7063 ms
2025-12-07 16:17:34.975 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-07 16:17:35.013 +03:00 [INF] HTTP GET /api/Product responded 200 in 250.0615 ms
2025-12-07 16:17:35.041 +03:00 [INF] HTTP GET /api/Product responded 200 in 28.3732 ms
2025-12-07 16:17:48.051 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 152.8474 ms
2025-12-07 16:17:48.178 +03:00 [INF] HTTP GET /api/Cart responded 200 in 10.8578 ms
2025-12-07 16:17:48.197 +03:00 [INF] HTTP GET /api/Product responded 200 in 31.3429 ms
2025-12-07 16:17:48.228 +03:00 [INF] HTTP GET /api/Product responded 200 in 25.0492 ms
2025-12-07 16:17:50.503 +03:00 [INF] HTTP GET /api/Cart responded 200 in 17.3972 ms
2025-12-07 16:18:01.219 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 5943.8439 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:18:02.134 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLIBNQ4AM1:0000001B
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 134
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:18:02.167 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 134
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:18:02.851 +03:00 [ERR] HTTP POST /api/Customer responded 500 in 633.7082 ms
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-07 16:18:02.910 +03:00 [ERR] Unhandled exception occured.Path: /api/Customer, Method: POST, StatusCode: 200,User: Anonymous,TraceId: 0HNHLIBNQ4AM1:0000001D
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 134
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
2025-12-07 16:18:02.924 +03:00 [ERR] Unhandled exception occured
System.Exception: User not authenticated or ID not found in token
   at ECommerceAPI.Persistence.Services.SharedIdentityService.GetUserId() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Persistence\Services\SharedIdentityService.cs:line 22
   at ECommerceAPI.Application.Features.Commands.Customers.CreateCustomer.CreateCustomerCommandHandler.Handle(CreateCustomerCommandRequest request, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Features\Commands\Customers\CreateCustomer\CreateCustomerCommandHandler.cs:line 26
   at ECommerceAPI.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Core\ECommerceAPI.Application\Behaviors\ValidationBehavior.cs:line 25
   at ECommerceAPI.API.Controllers.CustomerController.CreateCustomer(CreateCustomerCommandRequest request) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Controllers\CustomerController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at ECommerceAPI.API.Program.<>c.<<Main>b__0_2>d.MoveNext() in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Presentation\ECommerceAPI.API\Program.cs:line 134
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ECommerceAPI.Infrastructure.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\Asus\Desktop\ECommerce-Backend\ECommerceAPI\Infrastructure\ECommerceAPI.Infrastructure\Middleware\GlobalExceptionHandlerMiddleware.cs:line 27
